{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://getweather/./src/createUI.js","webpack://getweather/./src/index.js"],"sourcesContent":["const key = \"citiesNames\";\n\n//The function of getting a map by coordinates using static Yandex maps\nexport function getMap(el, lat, lon) {\n  let mapImg;\n  if (lat === \"notFound\" || lon === \"notFound\") {\n    mapImg = \"https://picsum.photos/id/1025/500/300\";\n  } else {\n    mapImg = `https://static-maps.yandex.ru/1.x/?ll=${lon},${lat}&z=10&l=map`;\n  }\n  const divMap = el.querySelector(\".map\");\n  divMap.style.backgroundImage = `url(${mapImg})`;\n}\n\n//The function of reading the list of saved cities from the local storage\nasync function readList() {\n  let values = localStorage.getItem(key);\n  return values === null ? [] : JSON.parse(values);\n}\n\n//The function of saving the list of entered cities in the local storage\nfunction saveList(items) {\n  localStorage.setItem(key, JSON.stringify(items));\n}\n\n// The function for drawing a list of entered cities\nfunction drawList(el, items) {\n  const ol = el.querySelector(\"ol\");\n  ol.innerHTML = `${items.map((el) => `<li>${el}</li>`).join(\"\")}`;\n}\n\n//Function for rendering the weather on the page\nasync function showWeather(el, weatherInfo) {\n  el.querySelector(\"table\").remove();\n  let table = document.createElement(\"table\");\n  let thead = document.createElement(\"thead\");\n  let tbody = document.createElement(\"tbody\");\n\n  table.appendChild(thead);\n  table.appendChild(tbody);\n\n  let title = document.createElement(\"tr\");\n  let heading1 = document.createElement(\"th\");\n  heading1.innerHTML = \"Город\";\n  let heading2 = document.createElement(\"th\");\n  heading2.innerHTML = \"Температура\";\n  let heading3 = document.createElement(\"th\");\n  heading3.innerHTML = \"Изображение\";\n  let heading4 = document.createElement(\"th\");\n  heading4.innerHTML = \"Широта\";\n  let heading5 = document.createElement(\"th\");\n  heading5.innerHTML = \"Долгота\";\n\n  title.appendChild(heading1);\n  title.appendChild(heading2);\n  title.appendChild(heading3);\n  title.appendChild(heading4);\n  title.appendChild(heading5);\n  thead.appendChild(title);\n\n  const j = weatherInfo;\n\n  let row = document.createElement(\"tr\");\n\n  let row_data_1 = document.createElement(\"td\");\n  row_data_1.className = \"cityName\";\n  row_data_1.innerHTML = `${j.name}`;\n\n  let row_data_2 = document.createElement(\"td\");\n  row_data_2.className = \"temp\";\n  row_data_2.innerHTML = `${j.main.temp} С`;\n\n  let row_data_3 = document.createElement(\"td\");\n  row_data_3.className = \"icon\";\n  row_data_3.innerHTML = `<img src=\"https://openweathermap.org/img/wn/${j.weather[0].icon}@2x.png\">`;\n\n  let row_data_4 = document.createElement(\"td\");\n  row_data_4.innerHTML = `${j.coord.lat}`;\n  row_data_4.className = \"lat\";\n\n  let row_data_5 = document.createElement(\"td\");\n  row_data_5.innerHTML = `${j.coord.lon}`;\n  row_data_5.className = \"lon\";\n\n  row.appendChild(row_data_1);\n  row.appendChild(row_data_2);\n  row.appendChild(row_data_3);\n  row.appendChild(row_data_4);\n  row.appendChild(row_data_5);\n  tbody.appendChild(row);\n\n  el.appendChild(table);\n}\n\n//Function for getting weather data by city name\nasync function getWeather(cityName) {\n  const appId = \"2597ebe4fdf3e724b73c766fb984c2fb\";\n  const url = `https://api.openweathermap.org/data/2.5/weather?units=metric&q=\n  ${cityName}&appid=${appId}`;\n  let response = await fetch(url);\n  let status = response.status;\n  if (status !== 200)\n    return {\n      name: cityName,\n      main: {\n        temp: \"notFound\",\n      },\n      weather: [{ icon: \"https://picsum.photos/seed/picsum/10/300\" }],\n      coord: {\n        lat: \"notFound\",\n        lon: \"notFound\",\n      },\n    };\n  let json = await response.json(); \n  return json;\n}\n\n//The function of obtaining the coordinates of the location by the user's IP address\nasync function getIP() {\n  const url = \"http://ipwho.is/\";\n  let response = await fetch(url);\n  let json = await response.json();\n  return {\n    name: json.city,\n    coord: { lat: json.latitude, lon: json.longitude },\n  };\n}\n\n//Markup creation function\nfunction createElements(el) {\n  const divYourWeatherInfo = document.createElement(\"div\");\n  divYourWeatherInfo.className = \"yourWeatherInfo\";\n\n  const yourTable = document.createElement(\"table\");\n  yourTable.className = \"youWeatherTable\";\n  divYourWeatherInfo.appendChild(yourTable);\n\n  const label1 = document.createElement(\"label\");\n  label1.className = \"label\";\n  label1.innerText = \"Карта\";\n  label1.setAttribute(\"for\", divYourWeatherInfo.className);\n  divYourWeatherInfo.appendChild(label1);\n\n  const divMap = document.createElement(\"div\");\n  divMap.className = \"map\";\n  divYourWeatherInfo.appendChild(divMap);\n\n  el.appendChild(divYourWeatherInfo);\n\n  const divContainer = document.createElement(\"div\");\n  divContainer.className = \"container\";\n\n  const ol = document.createElement(\"ol\");\n  ol.className = \"citiesList\";\n  ol.placeholder = \"Список городов\";\n\n  const divWeatherInfo = document.createElement(\"div\");\n  divWeatherInfo.className = \"weatherInfo\";\n\n  const label2 = document.createElement(\"label\");\n  label2.className = \"label\";\n  label2.id = \"label2\";\n  label2.innerText = \"Ваш список городов\";\n  label2.setAttribute(\"for\", divWeatherInfo.className);\n  label2.hidden = \"true\";\n  divWeatherInfo.appendChild(label2);\n\n  const cityWeatherTable = document.createElement(\"table\");\n  cityWeatherTable.className = \"cityWeatherTable\";\n  divWeatherInfo.appendChild(cityWeatherTable);\n  divContainer.appendChild(divWeatherInfo);\n  divContainer.appendChild(ol);\n  el.appendChild(divContainer);\n\n  const formEl = document.createElement(\"form\");\n  formEl.className = \"myForm\";\n\n  const inp = document.createElement(\"input\");\n  inp.className = \"userInput\";\n  inp.placeholder = \"Type city and press enter\";\n  formEl.appendChild(inp);\n\n  const btn = document.createElement(\"button\");\n  btn.className = \"userButton\";\n  btn.innerText = \"Get weather\";\n  formEl.appendChild(btn);\n  el.appendChild(formEl);\n\n  return el;\n}\n\n//main function\nasync function createUI(el) {\n  el = createElements(el);\n\n  //determining the location coordinates by IP\n  const yourParameters = await getIP();\n  const yourCitiName = yourParameters.name;\n  const coord = yourParameters.coord;\n\n  //getting weather by city name\n  const yourWeather = await getWeather(yourCitiName);\n\n  //weather display on the page\n  await showWeather(el.querySelector(\".yourWeatherInfo\"), yourWeather);\n\n  //reading the list of saved cities\n  const items = await readList();\n\n  //reading the list of saved cities\n  drawList(el.querySelector(\".container\"), items);\n\n  //get map\n  getMap(el, coord.lat, coord.lon);\n\n  //handler for interaction with the form - input elements and buttons\n  el.querySelector(\".myForm\").addEventListener(\"submit\", async (ev) => {\n    ev.preventDefault();\n\n    //reading the value from the form-input\n    const formElement = ev.target;\n    const inputEl = formElement.querySelector(\"input\");\n    const cityName = inputEl.value;\n    inputEl.value = \"\";\n\n    //checking the entered city for its presence in the list of saved cities\n    let result = items.reduce(function (res, el) {\n      if (el === cityName) {\n        res = true;\n        return res;\n      }\n      return res;\n    }, false);\n\n    //if the entered city is not in the saved list, then add it\n    if (!result) items.push(cityName);\n\n    //the list can contain only 10 cities. if the 11th city is entered,\n    //then the first one from the list is deleted\n    items.splice(items, items.length - 10);\n\n    //drawing a list of saved cities\n    drawList(el.querySelector(\".container\"), items);\n\n    //saving the modified list of cities to local storage\n    saveList(items);\n\n    //getting the weather for the entered city\n    const weather = await getWeather(cityName);\n\n    //rendering the weather of the entered city\n    await showWeather(el.querySelector(\".weatherInfo\"), weather);\n\n    //getting a map of the entered city\n    getMap(el, weather.coord.lat, weather.coord.lon);\n  });\n\n  //click handler for the list of saved cities\n  el.querySelector(\"ol\").addEventListener(\"click\", async (ev) => {\n    ev.preventDefault();\n    const li = ev.target;\n    const cityName = li.innerHTML;\n\n    //getting the weather for the clicked city\n    const weather = await getWeather(cityName);\n\n    //rendering the clicked city on the weather form\n    await showWeather(el.querySelector(\".weatherInfo\"), weather);\n    const label2 = document.querySelector(\"#label2\");\n    label2.innerText = \"Погода в выбранном городе\";\n\n    //getting the weather of the clicked city\n    getMap(el, weather.coord.lat, weather.coord.lon);\n  });\n}\nexport { getIP, getWeather, createUI, readList };\n","import { createUI } from \"./createUI.js\";\nimport \"../styles.css\";\n\n//createUI(document.querySelector(\".container\"));\ncreateUI(document.querySelector(\"body\"));\n"],"names":["key","getMap","el","lat","lon","mapImg","querySelector","style","backgroundImage","readList","values","localStorage","getItem","JSON","parse","saveList","items","setItem","stringify","drawList","innerHTML","map","join","showWeather","weatherInfo","remove","table","document","createElement","thead","tbody","appendChild","title","heading1","heading2","heading3","heading4","heading5","j","row","row_data_1","className","name","row_data_2","main","temp","row_data_3","weather","icon","row_data_4","coord","row_data_5","getWeather","cityName","url","fetch","response","status","json","getIP","city","latitude","longitude","createElements","divYourWeatherInfo","yourTable","label1","innerText","setAttribute","divMap","divContainer","ol","placeholder","divWeatherInfo","label2","id","hidden","cityWeatherTable","formEl","inp","btn","yourParameters","yourCitiName","yourWeather","addEventListener","ev","preventDefault","formElement","target","inputEl","value","result","reduce","res","push","splice","length","li","createUI"],"sourceRoot":""}